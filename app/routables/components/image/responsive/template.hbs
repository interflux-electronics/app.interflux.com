<figure
  class="responsive-image {{this.orientation}}{{if @class ' '}}{{@class}}"
  {{did-insert this.register}}
  {{on 'click' this.onClick}}
>
  <picture>
    {{#if this.valid}}
      {{#if this.optimal}}
        {{#if webp}}
          <source
            srcset="{{cdn}}/{{@image.path}}@{{this.optimal.width}}x{{this.optimal.height}}.webp"
            type="image/webp"
          >
        {{/if}}
        <img
          src="{{cdn}}/{{@image.path}}@{{this.optimal.width}}x{{this.optimal.height}}.jpg"
          width={{this.optimal.width}}
          height={{this.optimal.height}}
          alt={{@image.alt}}
          onload={{this.onLoad}}
          onerror={{this.onError}}
        >
      {{/if}}
    {{/if}}
  </picture>

  {{#if this.showLoading}}
    <div class="loading">
      <LoadSpinner @icon="cup" />
    </div>
  {{/if}}

  {{#if this.showError}}
    <div class="error">
      <!-- <Icon::InterfluxGrey /> -->
    </div>
  {{/if}}

  {{#if @image.caption}}
    <figcaption>{{@image.caption}}</figcaption>
  {{/if}}
</figure>